<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Random HOKUBE Clips</title>

<style>
  :root{
    --bg:#fff;
    --fg:#111;
    --muted:#555;
    --border:#111;
  }

  body{
    margin:0;
    background:var(--bg);
    color:var(--fg);
    font-family: "Courier New", Courier, monospace;
    font-weight:700; /* gras */
    letter-spacing: .02em;
    min-height:100vh;
    display:flex;
    align-items:center;
    justify-content:center;
  }

  .container{
    width:min(980px, 92vw);
    padding: 28px 0 42px;
  }

  /* Header très galerie */
  .top{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:16px;
    margin-bottom:18px;
  }

  .title{
    font-size:14px;
    text-transform:uppercase;
    line-height:1.2;
  }

  .subtitle{
    font-size:12px;
    color:var(--muted);
    font-weight:700;
    margin-top:6px;
    text-transform:uppercase;
  }

  /* Bouton dé minimal */
  .dice-btn{
    all:unset;
    cursor:pointer;
    display:inline-flex;
    align-items:center;
    gap:10px;
    user-select:none;
  }
  .dice-btn:hover{ opacity:.7; }
  .dice-btn:focus-visible{
    outline:2px solid var(--fg);
    outline-offset:4px;
  }

  .dice{
    width:34px;
    height:34px;
    display:block;
    transform-origin:50% 50%;
  }

  .dice-wrap{
    display:inline-flex;
    align-items:center;
    justify-content:center;
  }

  /* Animation au clic */
  .rolling .dice{
    animation: roll .42s cubic-bezier(.2,.8,.2,1);
  }
  .rolling{
    animation: bop .42s cubic-bezier(.2,.8,.2,1);
  }

  @keyframes roll{
    0%   { transform: rotate(0deg) scale(1); }
    55%  { transform: rotate(180deg) scale(1.06); }
    100% { transform: rotate(360deg) scale(1); }
  }
  @keyframes bop{
    0%   { transform: translateY(0); }
    45%  { transform: translateY(-3px); }
    100% { transform: translateY(0); }
  }

  .btn-text{
    font-size:12px;
    text-transform:uppercase;
  }

  /* Lecteur “cadre galerie” */
  .frame{
    width:100%;
    aspect-ratio:16/9;
    border:2px solid var(--border);
    background:#fff;
  }

  iframe{
    width:100%;
    height:100%;
    border:none;
    display:block;
  }

  .footer{
    display:flex;
    justify-content:space-between;
    gap:16px;
    margin-top:12px;
    font-size:12px;
    text-transform:uppercase;
    color:var(--muted);
  }

  .footer a{
    color:inherit;
    text-decoration:none;
    border-bottom:1px solid transparent;
  }
  .footer a:hover{
    border-bottom-color:var(--muted);
  }

  /* mobile */
  @media (max-width:520px){
    .top{ flex-direction:column; align-items:flex-start; }
    .footer{ flex-direction:column; align-items:flex-start; }
  }
</style>
</head>
<body>

<div class="container">
  <div class="top">
    <div>
      <div class="title">Hokube — Random Clips</div>
      <div class="subtitle">Click the dice to change the projection</div>
    </div>

    <button class="dice-btn" id="roll" aria-label="Changer de clip">
      <span class="dice-wrap" id="diceWrap" aria-hidden="true">
        <!-- Dé très minimal -->
        <svg class="dice" viewBox="0 0 64 64">
          <rect x="8" y="8" width="48" height="48" rx="10" fill="#111"/>
          <circle cx="22" cy="22" r="4" fill="#fff"/>
          <circle cx="42" cy="42" r="4" fill="#fff"/>
          <circle cx="42" cy="22" r="4" fill="#fff"/>
          <circle cx="22" cy="42" r="4" fill="#fff"/>
          <circle cx="32" cy="32" r="4" fill="#fff"/>
        </svg>
      </span>
      <span class="btn-text">Roll</span>
    </button>
  </div>

  <div class="frame">
    <iframe id="player"
      allow="autoplay; encrypted-media; picture-in-picture"
      allowfullscreen
      referrerpolicy="origin-when-cross-origin"></iframe>
  </div>

  <div class="footer">
    <div id="status">Clip —</div>
    <a id="openOnYt" href="#" target="_blank" rel="noreferrer">Open on YouTube</a>
  </div>
</div>

<script>
  const CLIPS = [
    "UBshPLW2OCU",
    "APZLi6KSqnY",
    "q3g5W9dqEaA",
    "c5LyOyADyDI",
    "Gg8djFRQr_M",
    "uvHZdRrup5E"
  ];

  const player = document.getElementById("player");
  const rollBtn = document.getElementById("roll");
  const diceWrap = document.getElementById("diceWrap");
  const statusEl = document.getElementById("status");
  const openOnYt = document.getElementById("openOnYt");

  let lastIndex = -1;

  function pickRandomNoRepeat(){
    if (CLIPS.length === 0) return -1;
    if (CLIPS.length === 1) return 0;

    let i;
    do { i = Math.floor(Math.random() * CLIPS.length); }
    while (i === lastIndex);
    return i;
  }

  function setEmbed(id, autoplay){
    const ap = autoplay ? 1 : 0;
    // nocookie + paramètres minimalistes
    player.src = `https://www.youtube-nocookie.com/embed/${id}?autoplay=${ap}&rel=0&modestbranding=1`;
    openOnYt.href = `https://www.youtube.com/watch?v=${id}`;
  }

  function updateStatus(index){
    statusEl.textContent = `Clip ${index + 1} / ${CLIPS.length}`;
  }

  function rollOnce(autoplay){
    const i = pickRandomNoRepeat();
    if (i < 0) return;

    // Animation dé
    diceWrap.classList.remove("rolling");
    // force reflow pour relancer l’anim
    void diceWrap.offsetWidth;
    diceWrap.classList.add("rolling");

    lastIndex = i;
    setEmbed(CLIPS[i], autoplay);
    updateStatus(i);
  }

  rollBtn.addEventListener("click", () => rollOnce(true));

  // premier clip au hasard, sans autoplay
  (function init(){
    if (CLIPS.length === 0) {
      statusEl.textContent = "No clips";
      openOnYt.style.display = "none";
      return;
    }
    lastIndex = Math.floor(Math.random() * CLIPS.length);
    setEmbed(CLIPS[lastIndex], false);
    updateStatus(lastIndex);
  })();
</script>

</body>
</html>
